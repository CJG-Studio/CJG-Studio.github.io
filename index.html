<<!-- index.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>陈的个人网站</title>
    <style>
        /* styles.css */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 50px 0;
            border-bottom: 1px solid #eee;
        }

        nav {
            margin: 20px 0;
            text-align: center;
        }

        nav a {
            margin: 0 15px;
            text-decoration: none;
            color: #2c3e50;
        }

        section {
            margin: 40px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .projects {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .project-card {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #666;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>欢迎来到我的网站！</h1>
        <p>Scratch|CCW|Python|HTML</p>
    </header>

    <nav>
        <a href="#about">关于我</a>
        <a href="#projects">项目</a>
        <a href="#contact">联系</a>
    </nav>

    <section id="about">
        <h2>简介</h2>
        <p>开发者，擅长Scratch</p>
        <h3>技能</h3>
        <ul>
            <li>Web开发</li>
            <li>Python编程</li>
            <li>数据分析</li>
            <li>CCW Scratch开发</li>
        </ul>
    </section>

    <section id="projects">
        <h2>我的项目</h2>
        <div class="projects">
            <div class="project-card">
                <h3>小游戏</h3>
                <p>一款打怪且可以联机的小游戏，目前正在测试中。推荐使用5寸及以上的手机或电脑游玩</p>
                <a href="https://www.ccw.site/player/679197cc28de5c567e9854b6?accessKey=3fd0e1&projectId=https%3A%2F%2Fm.ccw.site%2Fuser_projects_sb3%2F264003928%2F44635306b10825e6574e5d1b70eddd0c.sb3">查看项目</a>
            </div>
            <div class="project-card">
                <h3>RHYGO</h3>
                <p>正在开发中...</p>
                <a href="666">Coming Soon.</a>
            </div>
        </div>
    </section>

    <section id="contact">
        <h2>联系我</h2>
        <p>邮箱：apple19782013@163.com</p>
        <p>GitHub: <a href="https://github.com/Klweb3928">你的GitHub主页</a></p>
    </section>

<section id="guestbook">
    <h2>留言板</h2>
    
    <!-- 留言输入表单 -->
    <div class="guestbook-form">
        <form id="messageForm">
            <div>
                <label>姓名：</label>
                <input type="text" name="name" required>
            </div>
            <div>
                <label>邮箱、昵称、微信昵称：</label>
                <input type="email" name="email" required>
            </div>
            <div>
                <label>留言：</label>
                <textarea name="message" rows="4" required></textarea>
            </div>
            <button type="submit">提交留言</button>
        </form>
        <div id="messageStatus"></div>
    </div>

    <!-- 留言展示区 -->
    <div class="messages-container" id="messagesContainer">
        <div class="loading">正在加载留言...</div>
    </div>
</section>

<style>
/* 添加以下CSS样式 */
.guestbook-form {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 30px;
}

.guestbook-form form div {
    margin-bottom: 15px;
}

.guestbook-form label {
    display: block;
    margin-bottom: 5px;
}

.guestbook-form input,
.guestbook-form textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

button {
    background: #2c3e50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background: #34495e;
}

.messages-container {
    border-top: 1px solid #eee;
    padding-top: 20px;
}

.message-item {
    background: #fff;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 6px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    color: #666;
}

.loading {
    text-align: center;
    padding: 20px;
    color: #999;
}
</style>

<script>
const config = {
    username: 'Klweb3928',  
    repo: 'Klweb3928.github.io',           
    token: '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'        
};

// 提交留言
document.getElementById('messageForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const messageData = {
        title: `来自 ${formData.get('name')} 的留言`,
        body: `**邮箱**: ${formData.get('email')}\n\n**留言内容**:\n${formData.get('message')}`
    };

    try {
        const response = await fetch(`https://api.github.com/repos/${config.username}/${config.repo}/issues`, {
            method: 'POST',
            headers: {
                'Authorization': `token ${config.token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(messageData)
        });

        if (response.ok) {
            document.getElementById('messageStatus').innerHTML = 
                '<div style="color:green;">留言成功！</div>';
            e.target.reset();
            loadMessages(); // 刷新留言列表
        } else {
            throw new Error('提交失败');
        }
    } catch (error) {
        document.getElementById('messageStatus').innerHTML = 
            '<div style="color:red;">留言失败，请稍后再试</div>';
    }
});

// 加载留言
async function loadMessages() {
    try {
        const response = await fetch(
            `https://api.github.com/repos/${config.username}/${config.repo}/issues?labels=guestbook`
        );
        const messages = await response.json();
        
        const container = document.getElementById('messagesContainer');
        container.innerHTML = messages.length ? '' : '<div>还没有留言，快来第一个留言吧！</div>';
        
        messages.forEach(msg => {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-item';
            messageDiv.innerHTML = `
                <div class="message-header">
                    <span>${msg.title.replace('来自 ', '')}</span>
                    <span>${new Date(msg.created_at).toLocaleDateString()}</span>
                </div>
                <div class="message-content">${msg.body.split('**留言内容**:')[1]}</div>
            `;
            container.appendChild(messageDiv);
        });
    } catch (error) {
        console.error('加载留言失败:', error);
    }
}

// 页面加载时获取留言
loadMessages();
</script>

    <footer>
        <p>© 2023 Klweb3928. 由GitHub Pages(github.io)驱动</p>
    </footer>

    <script>
    // 平滑滚动
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
    </script>
</body>
</html>
